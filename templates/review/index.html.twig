{% extends 'base.html.twig' %}

{% block title %}Review | {{review.title}}!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h2>{{'fields.title'|trans}}: {{review.title|raw}}!</h2>
    <h5>{{'fields.author'|trans}}: <strong>{{ review.author.getFullName()|raw }}</strong></h5>
    <h5>{{'fields.category'|trans}}: <strong>{{ review.category.name }}</strong></h5>
    <p>
        {{'fields.tags'|trans}}:
        {% for tag in review.tags %}
            {{ tag.name }}
        {% endfor %}
    </p>
    <header style="background-color: #ddd">
        {{review.text|markdown}}
    </header>
    {% for image in review.images %}
        <img alt src="{{ image.sharedUri }}" style="height: 100px;">
    {% endfor %}
    <h5>{{ 'fields.score'|trans }}: {{ review.score }}</h5>
    <h5>{{ 'fields.likes'|trans }}: {{ review.likes|length }}</h5>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <a class="btn btn-outline-primary" href="{{ path('review_like', {'reviewId': review.id}) }}">{{'word.like'|trans }}</a>
    {% endif %}
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        {{ form(rating_form) }}
    {% endif %}
    <h5>{{ 'fields.comments'|trans }}: </h5>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        {{ form(comment_form) }}
        {% for comment in review.comments %}
            <figure>
                <blockquote class="blockquote">
                    <p>{{comment.text}}</p>
                </blockquote>
                <figcaption class="blockquote-footer">
                    {{ comment.user.getFullName() }} {{ 'word.in'|trans }} <cite title="Source Title">{{comment.dateCreate|date("H:i d.m")}}</cite>
                </figcaption>
            </figure>
        {% endfor %}
    {% else %}
        <p>{{ 'review.comments.not_available'|trans }}</p>
    {% endif %}
</div>
{% endblock %}
